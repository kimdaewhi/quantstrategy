## 가상환경 구성
### 1. 해당 폴더에서 다음 명령어 실행  
```python -m venv .venv```  
```.\.venv\Scripts\Activate```  
```.venv\bin\activate```

### 2. 필요한 패키지 설치
```pip install [패키지명]```  

-- 패키지 목록 관리  
```pip freeze > [requirements.txt]```  

-- 필요할 때 패키지 파일 이용한 패키지 설치  
```pip install -r [requirements.txt]```

```Ctrl``` + ```Shift``` + ```P``` > Python: Select Interpreter > 가성환경 인터프리터 선택

-- 가상환경 비활성화
```deactivate```


### 3. 가상환경 이용하여 패키지 설치
가상환경 실행 명령어  
```.\.venv\Scripts\Activate```

### 4. 패키지 설치
```pip install backtrader```  
```pip install zipline-reloaded```
> zipline-reloaded 패키지 설치시 오류 해결법(👉🏻웬만하면 파이썬 3.5ver 이하로 쓰자..😑😑)  
https://velog.io/@havanafrog/ta-lib-errorta-lib-%EC%84%A4%EC%B9%98-%EC%98%A4%EB%A5%98
https://github.com/cgohlke/talib-build/releases  
파이썬 버전 확인 ex) 3.12.2 = cpp_312어쩌고

```pip install pyalgotrade```
```pip install yfinance```
```pip install plotly```
```pip install finance-datareader```
```pip install plotly```                    finance-datareader 종속성 패키지
```pip install tabulate[widechars]```       DataFrame 이쁘게 출력
```pip install openpyxl```                  Excel 관련
```pip install dart-fss```                  재무 데이터 관련

-----

### backtrader 정리

1. 전략 class는 backtrader의 Strategy를 상속받아서 사용한다.
    ```python
    import backtrader as bt
    .
    .
    .
    class MyStrategy(bt.Strategy):
        def log:
            .
            .
    ```

2. ```bt.Strategy``` 클래스에서 제공하는 기본 메서드 종류
   - ```__init__``` : 인스턴스 초기화 시 사용하는 메서드
   - ```notify__order``` : 주문 상태 변경을 알리기 위한 메서드. 주문 제출, 접수, 완료, 취소 등
   - ```next``` : 매일 호출되는 메서드. 새로운 데이터가 입력될 때마다 호출되어 트레이딩 로직을 실행함.
   - ```stop``` : 백테스트가 종료될 때 호출되는 메서드



## Dual Momentum 전략

- **💎 듀얼 모멘텀 투자 전략**
    
    > 듀얼 모멘텀 투자전략은 두 가지 유형의 모멘텀을 결합하여 투자 결정을 내리는 전략이다. 절대 모멘텀(Absolute Momentum)과 상대 모멘텀(Relative Momentum) 사용한다.
    Gary Antonacci가 소개한 전략으로 포트폴리오 성과를 향상시키고 리스크를 줄이는 데 사용된다.
    > 
    
    **❓ 절대 모멘텀 & 상대 모멘텀의 개념**
    
    - **절대 모멘텀(Absolute Momentum)**
    절대 모멘텀은 자산의 과거 성과가 미래의 성과를 예측할 수 있다는 가정하에, 특정 자산의 과거 성과를 기준으로 투자 결정을 내린다.*(단일 자산의 과거 성과)*
    - **상대 모멘텀 (Relative Momentum)**
    상대 모멘텀은 여러 자산 간의 과거 성과를 비교하여 상대적으로 더 나은 성과를 보인 자산을 선택하는 전략이다. 이는 자산 간의 성과 차이를 이용하여 투자 결정을 내린다.*(여러 자산 간의 성과 비교)*
    
    **🌟 장점**
    
    1. **높은 수익 잠재력** 
    * 과거 성과가 우수한 자산에 투자함으로써 더 높은 수익을 추구할 수 있다.(상대 모멘텀)
    * 자산의 과거 성과가 양수인 경우에만 투자하여 손실을 줄일 수 있다.(절대 모멘텀)
    2. **위험 관리
    *** 절대 모멘텀 필터를 통해 하락장에서 안전 자산으로 이동함으로써 큰 손실을 피할 수 있다. 이는 시장의 하락기에서 포트폴리오의 리스크를 줄이는 데 효과적이다.
    3. **간단성**
    * 비교적 간단한 전략을 사용하여 구현할 수 있으며, 자동화하기도 용이하다. 직관적이고 주기적인 데이터 업데이트와 리밸런싱만으로도 전략을 실행할 수 있다.
    
    **🌟 단점**
    
    1. **거래 비용 증가**
    * 잦은 리밸런싱으로 인한 거래 비용이 증가할 수 있다.
    2. **시장 변화에 대한 민감도**
    * 전략이 시장의 급격한 변화에 민감하게 반응할 수 있다. 갑작스러운 시장 조정이나 변동성이 큰 시장 상황에서 잦은 매매로 인해 성과가 저하될 수 있다.
    3. **데이터 의존성**
    * 전략의 성과는 데이터의 질과 정확성에 크게 의존한다. 데이터의 무결성이 무엇보다 중요하다.
    
    **🌟 팩터 선정**
    
    1. **유니버스** : KOSPI / KOSDAQ 상장 주식 종가
    2. **필**
        1. **절대 모멘텀** : 각 주식의 과거 6개월 수익률 기준 20종목 + **과거 12개월 분기 실적 당기순이익 적자 기업 제외***(기반 전략 외 새로 추가한 필터)*
        2. **상대 모멘텀 :** 각 주식의 과거 3/6/9/12 개월 수익률 기준으로 각각의 수익률 평균 계산.
        3. 절대 모멘텀 필터(2,3번)를 통과한 주식 중 상대 모멘텀 점수가 높은 상위 20종목 선택.
        4. 편입 종목 변경 : 투자주의종목/투자경고종목/투자위험종목/관리종목/우선주 제외.
            * 우선주 제외 : 보통주는 0, 우선주는 5,7,9,K 로 끝납니다. (참고 : https://www.facebook.com/financedata/photos/a.1891363164486019/2660241637598164/?type=3)
    3. **종목 개수 :** 20 종목
    4. **리밸런싱 주기 :** 6개월
    5. **수수료 :** 0.1%
    6. **무위험 자산 선정 :** 3년 만기 국고채
    7. **포트폴리오 비중 :** 주식 : 채권 6:4(최적화 비중)
    8. **수수료율 :** 0.1%
    9. **투자금액** : 1,000만원
    10. **운용기간 :** 2009.01.02 ~ 2019.12.30
    
    **🌟 리스크 관리**
    
    1. 포트폴리오중 수익률 -10%이상인 종목 손절 후 수익률이 가장 높은 종목 비중 증가.


    ----- 

    1. 한국시장 대상으로 진행할꺼라 FinanceDataReader 사용. 하지만 이건 주가관련 데이터만 제공함.

    2. 펀더멘탈 데이터는 Dart API사용하거나 다른 API 사용해야 하는데...
    ```dart-fss``` 라이브러리 사용해보자.(예전에 써봤으니까)  
     ❗예전에 썻던 계정 임시 비번 발급받아서 로그인하려는데 안됨;;;😭😭😭